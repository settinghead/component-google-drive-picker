var CONFIG={GOOGLE_CLIENT_ID:"614513768474.apps.googleusercontent.com"};if("undefined"==typeof TEMPLATES)var TEMPLATES={};if(TEMPLATES["google-drive-picker-template.html"]='<button type="button" class="btn btn-link btn-google"><img src="../../img/widget-icon-drive-1x.png"></button>\n',"undefined"==typeof RiseVision)var RiseVision={Authorization:{}};!function(e,o,i){"use strict";i.Authorization=function(){function i(i,n,t){o.auth.authorize({client_id:e.GOOGLE_CLIENT_ID,scope:n,immediate:i},function(e){e&&!e.error?c=e.access_token:window.console&&console.info("Authorization Fail: "+e.error),t.call(null,c)})}function n(){return g}function t(e){o.load("auth",{callback:function(){g=!0,"function"==typeof e&&e.apply(null)}})}function r(){return c}var c=null,g=!1;return{authorize:i,getAuthToken:r,isApiLoaded:n,loadApi:t}}()}(CONFIG,gapi,RiseVision),function(e,o,i,n,t){"use strict";function r(r,c){function g(){return v}function l(e){"string"==typeof e&&(v=e)}function u(){return _}function a(e){e[google.picker.Response.ACTION]===google.picker.Action.PICKED?(T.trigger(E,[e[google.picker.Response.DOCUMENTS]]),_=!1):e[google.picker.Response.ACTION]===google.picker.Action.CANCEL&&(T.trigger(w),_=!1)}function s(){if(O&&h.getAuthToken()){var e=(new google.picker.PickerBuilder).setOrigin(k).addView(V[v]).setOAuthToken(h.getAuthToken()).setCallback(a).build();e.setVisible(!0),_=!0,T.trigger(I)}}function d(){O=!0,V={docs:google.picker.ViewId.DOCS,docs_images:google.picker.ViewId.DOCS_IMAGES,documents:google.picker.ViewId.DOCUMENTS,presentations:google.picker.ViewId.PRESENTATIONS,spreadsheets:google.picker.ViewId.SPREADSHEETS,forms:google.picker.ViewId.FORMS,docs_images_and_videos:google.picker.ViewId.DOCS_IMAGES_AND_VIDEOS,docs_videos:google.picker.ViewId.DOCS_VIDEOS,folders:google.picker.ViewId.FOLDERS,pdfs:google.picker.ViewId.PDFS},s()}function p(){S.on("click",function(){return O&&h.getAuthToken()?void s():h.getAuthToken()?void(O||gapi.load("picker",{callback:d})):void h.authorize(!1,A,function(e){e&&gapi.load("picker",{callback:d})})})}function f(){var e=n.createElement("a");T.append(t["google-drive-picker-template.html"]),S=T.find(".btn-google"),n.referrer?(e.href=n.referrer,k=e.protocol+"//"+e.hostname):k=i.location.protocol+"//"+i.location.host,h.isApiLoaded()?p():h.loadApi(function(){h.authorize(!0,A,function(){p()})})}var k,h=e.Authorization,A="https://www.googleapis.com/auth/drive",E="picked",I="open",w="cancel",T=o(r),S=null,O=!1,V={},v=c.viewId||"docs",_=!1;return f(),{getViewId:g,setViewId:l,isPickerVisible:u}}var c="googleDrivePicker";o.fn.googleDrivePicker=function(e){return this.each(function(){o.data(this,"plugin_"+c)||o.data(this,"plugin_"+c,new r(this,e))})}}(RiseVision,jQuery,window,document,TEMPLATES);